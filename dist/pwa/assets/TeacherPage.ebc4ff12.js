import{u as N}from"./use-meta.66f1f4fa.js";import{u as z,s as D,r as E}from"./index.dfd9cb0e.js";import{Q as v}from"./QImg.1b5986fe.js";import{a as B,Q as P}from"./QCarousel.b0153130.js";import{Q as u}from"./QBtn.944b07d1.js";import{Q as c}from"./QIcon.6d082352.js";import{Q as w}from"./QInput.d1a9891f.js";import{c as G,a as K}from"./render.5fabfc26.js";import{h as J,t as R,v as h,D as $,A as s,f as r,y as l,C as f,x as C,S as k,F as V,L as b,U as x,H as y,E as H,G as M,_ as O,d as W,r as a}from"./index.18097bb9.js";import{a as F,Q as X}from"./QStepper.d261cb00.js";import{Q as Y}from"./QItem.35ff711a.js";import{Q as Z}from"./QList.483167a7.js";import{Q as ee}from"./QPage.a1ba8dcd.js";import{_ as A}from"./main001.a408614e.js";import"./index.esm.5c1ec681.js";import"./QSpinner.05d8e97a.js";import"./use-panel.df2272e5.js";import"./touch.3df10340.js";import"./selection.a32d342a.js";import"./use-cache.b0833c75.js";import"./vm.78afe1d7.js";import"./use-dark.8f6d6037.js";import"./use-fullscreen.dc3782cc.js";import"./Ripple.886f62f6.js";import"./use-router-link.3dd3ea6d.js";import"./use-key-composition.492df6eb.js";var Q=G({name:"QStepperNavigation",setup(e,{slots:o}){return()=>J("div",{class:"q-stepper__nav"},K(o.default))}});const m=e=>(H("data-v-75e3d5e2"),e=e(),M(),e),te={class:"row long-padded light-yellow-back"},oe=m(()=>l("h6",{class:"fluid text-center text-dark-green"},[f("\u6B61\u8FCE\u52A0\u5165\u6211\u5011\u7684\u5E2B\u8CC7\u793E\u5340"),l("br")],-1)),re={class:"row white-back flex flex-col long-padded"},se=m(()=>l("h4",{class:"fluid text-center text-dark-green bold"},"\u5C08\u696D\u5E2B\u8CC7",-1)),le={class:"row flex flex-center long-padded"},ae=m(()=>l("div",{class:"col-1"},null,-1)),ie={class:"col-md-2 col-sm-4 col-xs-5 row flex"},ne={class:"col-md-6 col-sm-6 col-xs-6"},de=m(()=>l("div",{class:"filler"},null,-1)),ue={class:"row flex flex-center padded"},me={class:"text-black text-center bold"},pe={class:"text-dark-gray text-center"},ce={class:"text-black text-center bold"},he={class:"text-dark-gray text-center"},fe={class:"text-dark-gray text-center"},ge=m(()=>l("div",{class:"small-space"},null,-1)),_e={class:"row long-padded flex flex-center light-yellow-back",id:"my-form",ref:"my-form"},we=m(()=>l("h4",{class:"fluid text-center text-dark-green bold"},"\u53EA\u9700\u63D0\u4F9B\u8AB2\u7A0B\u6642\u9593\u53CA\u5167\u5BB9\uFF0C\u5176\u4ED6\u5C31\u4EA4\u7D66\u5171\u5B78\u5CF6\uFF01",-1)),ye=m(()=>l("h6",{class:"fluid text-center text-dark-green"},[f("\u5171\u5B78\u5CF6\u662F\u4E00\u500B\u8AB2\u7A0B\u7D44\u7E54\u5E73\u53F0\uFF0C"),l("br"),f("\u670D\u52D9\u76EE\u524D\u5728\u53F0\u7063\u70BA\u6578\u4E0D\u5C11\uFF0C\u4E0D\u9078\u64C7\u6210\u70BA\u5B78\u6821\u6216\u88DC\u7FD2\u73ED\u7B49\u6559\u80B2\u6A5F\u69CB\u5168\u8077\u50F1\u54E1\u7684\u7368\u7ACB\u5DE5\u4F5C\u8001\u5E2B\u3002")],-1)),ve={class:"flex flex-col little-padded"},Ce={class:"text-orange mini margin-top"},be={class:"flex margin"},xe=m(()=>l("div",{class:"filler"},null,-1)),Be={class:"flex flex-col little-padded"},ke={class:"text-orange mini margin-top"};function Ve(e,o,i,d,g,p){const _=R("router-link");return h(),$(ee,null,{default:s(()=>[r(P,{class:"no-border",modelValue:e.slide,"onUpdate:modelValue":o[0]||(o[0]=t=>e.slide=t),"transition-prev":"slide-right","transition-next":"slide-left",animated:"",infinite:!0,swipeable:!0,"transition-duration":1e3,"control-color":"primary"},{default:s(()=>[r(B,{class:"row no-wrap flex-center",name:"style"},{default:s(()=>[r(v,{class:"main","no-transition":!0,"no-spinner":!0,loading:"eager",alt:"text",referrerpolicy:"no-referrer",style:{width:"100%",height:"100%","border-radius":"0"},src:A})]),_:1}),r(B,{class:"row no-wrap flex-center",name:"style1"},{default:s(()=>[r(v,{class:"main","no-transition":!0,"no-spinner":!0,loading:"eager",alt:"text",referrerpolicy:"no-referrer",style:{width:"100%",height:"100%","border-radius":"0"},src:A})]),_:1}),r(B,{class:"row no-wrap flex-center",name:"style2"},{default:s(()=>[r(v,{class:"main","no-transition":!0,"no-spinner":!0,loading:"eager",alt:"text",referrerpolicy:"no-referrer",style:{width:"100%",height:"100%","border-radius":"0"},src:A})]),_:1})]),_:1},8,["modelValue"]),l("div",te,[oe,r(u,{class:"light-green-back text-white med wide h-small",id:"join-us",rounded:"",onClick:o[1]||(o[1]=t=>e.join_us())},{default:s(()=>[f("\u7ACB\u523B\u52A0\u5165\u6211\u5011")]),_:1})]),l("div",re,[se,l("div",le,[ae,l("div",ie,[r(w,{class:"h-small",modelValue:e.myKey2,"onUpdate:modelValue":o[2]||(o[2]=t=>e.myKey2=t),type:"search",rounded:"rounded",outlined:"outlined",placeholder:"\u6559\u5E2B\u985E\u5225"},{append:s(()=>[r(c,{name:"search"})]),_:1},8,["modelValue"])]),l("div",ne,[r(u,{class:"light-green-back text-white h-small",id:"ser",rounded:""},{default:s(()=>[f("\u641C\u7D22")]),_:1})]),de]),l("div",ue,[(h(!0),C(V,null,k(e.users_public,(t,n)=>b((h(),C("div",{class:"teacher",key:n},[r(_,{class:"flex flex-col flex-center",to:"/teacher_user_info/"+t.id},{default:s(()=>[r(v,{src:t.img||t.photoURL,loading:"lazy",alt:t.name,referrerpolicy:"no-referrer",style:{width:"35vmin",height:"35vmin","max-width":"150px","max-height":"150px","border-radius":"50%",margin:"0.8em auto"}},null,8,["src","alt"]),l("h6",me,y(t.name),1),l("p",pe,y(t.des),1)]),_:2},1032,["to"])])),[[x,t.isTeacher&&t.showTeacher]])),128)),(h(!0),C(V,null,k(e.teachers,(t,n)=>b((h(),C("div",{class:"teacher",key:n},[r(_,{class:"flex flex-col flex-center",to:"/teacher_info/"+n},{default:s(()=>[r(v,{src:t.img,loading:"lazy",alt:t.name,referrerpolicy:"no-referrer",style:{width:"35vmin",height:"35vmin","max-width":"150px","max-height":"150px","border-radius":"50%",margin:"0.8em auto"}},null,8,["src","alt"]),l("h6",ce,y(t.name),1),l("p",he,y(t.zh),1),l("p",fe,y(t.en),1)]),_:2},1032,["to"])])),[[x,t.showTeacher]])),128))])]),ge,l("div",_e,[we,ye,r(X,{modelValue:e.step,"onUpdate:modelValue":o[14]||(o[14]=t=>e.step=t),"header-nav":"",ref:"stepper",color:"primary",animated:"",rounded:""},{default:s(()=>[r(F,{name:1,title:"\u586B\u5BEB\u60A8\u7684\u8CC7\u6599",icon:"settings",done:e.done1},{default:s(()=>[r(w,{modelValue:e.name,"onUpdate:modelValue":o[3]||(o[3]=t=>e.name=t),placeholder:"\u8001\u5E2B\u8CC7\u6599"},{prepend:s(()=>[r(c,{name:"add",color:"green"})]),_:1},8,["modelValue"]),r(w,{class:"readonly-input","bg-color":"teal-2",standout:"bg-teal-4 text-black",square:"",modelValue:e.new_email,"onUpdate:modelValue":o[4]||(o[4]=t=>e.new_email=t),placeholder:"\u60A8\u7684Email",readonly:!0},{prepend:s(()=>[r(c,{name:"email",color:"green"})]),_:1},8,["modelValue"]),r(Q,null,{default:s(()=>[l("div",ve,[r(u,{rounded:"",onClick:o[5]||(o[5]=()=>{e.done1=!0,e.step=2}),color:"primary",label:"\u7E7C\u7E8C"}),b(l("p",Ce,"**\u8ACB\u5148\u586B\u5BEB\u5B8C\u518D\u7E7C\u7E8C",512),[[x,!e.name]])])]),_:1})]),_:1},8,["done"]),r(F,{name:2,title:"\u8A3B\u518A\u5E33\u865F",icon:"create_new_folder",done:e.done2},{default:s(()=>[r(w,{type:"textarea",modelValue:e.des,"onUpdate:modelValue":o[6]||(o[6]=t=>e.des=t),placeholder:"\u8001\u5E2B\u7C21\u4ECB"},{prepend:s(()=>[r(c,{name:"add",color:"green"})]),_:1},8,["modelValue"]),r(w,{type:"textarea",modelValue:e.thought,"onUpdate:modelValue":o[7]||(o[7]=t=>e.thought=t),placeholder:"\u6559\u5B78\u7406\u5FF5"},{prepend:s(()=>[r(c,{name:"add",color:"green"})]),_:1},8,["modelValue"]),r(w,{modelValue:e.newCer,"onUpdate:modelValue":o[9]||(o[9]=t=>e.newCer=t),placeholder:"\u5C08\u696D\u8B49\u7167(\u9078\u586B)"},{prepend:s(()=>[r(c,{name:"add",color:"green"})]),append:s(()=>[r(u,{color:"secondary",onClick:o[8]||(o[8]=t=>e.addCer())},{default:s(()=>[f("\u65B0\u589E")]),_:1})]),_:1},8,["modelValue"]),r(Z,null,{default:s(()=>[(h(!0),C(V,null,k(e.certifications,(t,n)=>(h(),$(Y,{key:n},{default:s(()=>[l("div",be,y(t),1),xe,r(u,{size:"xs margin",color:"red",onClick:I=>e.removeCer(n)},{default:s(()=>[r(c,{name:"delete"})]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),r(Q,null,{default:s(()=>[r(u,{class:"q-ml-sm",flat:"",onClick:o[10]||(o[10]=t=>e.step=1),color:"primary",label:"\u4E0A\u4E00\u6B65"}),l("div",Be,[r(u,{rounded:"",onClick:o[11]||(o[11]=()=>{e.done2=!0,e.step=3}),color:"primary",label:"\u7E7C\u7E8C"}),b(l("p",ke,"**\u8ACB\u5148\u586B\u5BEB\u5B8C\u518D\u7E7C\u7E8C",512),[[x,!e.new_email]])])]),_:1})]),_:1},8,["done"]),r(F,{name:3,title:"\u9001\u51FA\u7533\u8ACB",icon:"add_comment",done:e.done3},{default:s(()=>[f("\u78BA\u8A8D\u60A8\u586B\u5BEB\u7684\u8CC7\u6599\u6B63\u78BA\u7121\u8AA4\u5F8C\uFF0C\u8ACB\u6309\u300C\u9001\u51FA\u7533\u8ACB\u300D"),r(Q,null,{default:s(()=>[r(u,{class:"q-ml-sm",flat:"",onClick:o[12]||(o[12]=t=>e.step=2),color:"primary",label:"\u4E0A\u4E00\u6B65"}),r(u,{color:"primary",label:"\u9001\u51FA\u7533\u8ACB",onClick:o[13]||(o[13]=t=>e.submit())})]),_:1})]),_:1},8,["done"])]),_:1},8,["modelValue"])],512)]),_:1})}const S=z(),Fe=W({name:"IndexPage",props:["uid","me","users_public","users","user","email","photoURL","isLogout","isInApp","teachers","requests"],setup(){N({title:"\u6559\u5E2B",noscript:{default:"This is content for browsers with no JS (or disabled JS)"}});const o=a({totalCount:1200}),i=a(!1),d=a(!1),g=a(!1),p=a(""),_=a(""),t=a(""),n=a(""),U=a([]),q=a(""),T=a("style"),j=a(1),L=a("");return{name:p,new_email:q,meta:o,step:j,thought:t,des:_,slide:T,myKey2:L,done1:i,done2:d,done3:g,newCer:n,certifications:U}},watch:{uid(e){e&&this.me&&this.me.name&&this.me.email&&(this.name=this.me.name,this.new_email=this.me.email)}},mounted(){this.uid&&this.me?(this.name=this.me.name,this.new_email=this.me.email||this.email):this.email&&(this.new_email=this.email)},methods:{removeCer(e){var o=[...this.certifications];o=o.filter(function(i,d){return d!=e}),this.certifications=[...o]},addCer(){var e=[...this.certifications];e.push(this.newCer),this.newCer="",this.certifications=[...e]},join_us(){try{document.getElementById("my-form").scrollIntoView()}catch(e){console.log(e)}},submit(){function e(i){return i.replace(/</g,"&lt;").replace(/</g,"&gt;")}var o=!1;for(let i=0;i<this.requests.length;i++){let d=this.requests[i];d.uid===this.uid&&!d.rejected&&!d.approved&&(o=!0)}if(this.uid)if(o){window.alert("\u60A8\u5DF2\u63D0\u51FA\u904E\u7533\u8ACB\u3002\u8ACB\u8010\u5FC3\u7B49\u5019\u56DE\u8986\uFF0C\u8B1D\u8B1D\uFF01");return}else{let i=[...this.requests];i.push({time:new Date().getTime(),uid:this.uid,name:this.name,email:this.new_email,des:e(this.des),thought:e(this.thought),certifications:this.certifications}),this.done3=!0,D(E(S,"requests"),i).then(()=>{window.alert("\u7533\u8ACB\u5DF2\u9001\u51FA\u3002\u8ACB\u8010\u5FC3\u7B49\u5019\u56DE\u8986\uFF0C\u8B1D\u8B1D\uFF01")});let d=Object.values(this.users);for(let g=0;g<d.length;g++){let p=d[g],_=p.id;if(p.isAdmin){let t=[],n=p.notifications||t;n.push({time:new Date().getTime(),msg:"\u7528\u6236"+this.name+"("+this.me.email+") \u63D0\u51FA\u4E86\u6210\u70BA\u6559\u5E2B\u7684\u7533\u8ACB\uFF0C\u8ACB\u81F3\u7BA1\u7406\u54E1\u7CFB\u7D71\u67E5\u770B",route:"admin"}),D(E(S,"users/"+_+"/notifications"),n).then(()=>{console.log("notification sent!")}),this.$emit("mailto",p.email,"Colearna_\u65B0\u6559\u5E2B\u7533\u8ACB","\u7528\u6236"+this.name+"("+this.me.email+') \u63D0\u51FA\u4E86\u6210\u70BA\u6559\u5E2B\u7684\u7533\u8ACB\uFF0C\u8ACB\u81F3<a href="https://next.colearna.co/admin" target="_blank" rel="noopener norefferer">\u7BA1\u7406\u54E1\u7CFB\u7D71</a>\u67E5\u770B')}}}else{window.alert("\u8ACB\u5148\u767B\u5165");return}},go(){this.$nextTick(()=>{this.step++})},loginGoogle(){this.$emit("loginGoogle")},logout(){this.$emit("logout")}}});var et=O(Fe,[["render",Ve],["__scopeId","data-v-75e3d5e2"]]);export{et as default};
