import{i as $}from"./index.619f7a66.js";import{u as G}from"./use-meta.87657334.js";import{u as W,x as T,p as C,v as V}from"./index.b48a8974.js";import{Q as P}from"./QIcon.8579a530.js";import{Q as D}from"./QInput.4a6e77ac.js";import{Q as r}from"./QForm.2bb3bbe9.js";import{Q as I}from"./QDate.83999a7d.js";import{Q as _}from"./QBtn.aed0d6bd.js";import{Q as S}from"./QFile.f20d589b.js";import{Q as j}from"./QSelect.bc6e8ee0.js";import{Q as w}from"./QCheckbox.9c3a2d0a.js";import{Q as O}from"./QImg.85a510de.js";import{Q as J}from"./QCard.b89a7a34.js";import{Q as K}from"./QPage.180ad620.js";import{v as x,D as R,A as n,y as l,f as a,C as d,x as U,L as E,U as B,B as L,F as q,S as H,H as g,E as X,G as Y,_ as Z,d as ee,r as f}from"./index.01f89363.js";import"./render.5fdad3bd.js";import"./use-key-composition.f56d096e.js";import"./QSpinner.5d586c29.js";import"./use-dark.b5a0469b.js";import"./vm.78afe1d7.js";import"./use-cache.b0833c75.js";import"./format.3e32b8d9.js";import"./Ripple.041564b3.js";import"./use-router-link.ce3d682c.js";import"./QChip.5390ccd3.js";import"./QItem.70f53e39.js";import"./use-prevent-scroll.c1b1dc85.js";import"./selection.a0b16fe0.js";const u=e=>(X("data-v-178eed76"),e=e(),Y(),e),te={class:"row padded"},se={class:"text-dark-green"},le={key:0,class:"row long-padded"},ae=u(()=>l("h2",{class:"text-dark-green"},"\u60A8\u5C1A\u672A\u767B\u5165\uFF0C\u8ACB\u5148\u767B\u5165\u6216\u8A3B\u518A",-1)),oe=[ae],ie={key:1,class:"row long-padded flex flex-center light-yellow-back"},ne=u(()=>l("h4",{class:"text-left text-dark-green fluid"},"\u5BB6\u9577\u8CC7\u6599",-1)),ue={class:"row"},re={class:"col-6 col-md-6 col-sm-8 col-xs-8 flex-col"},de=u(()=>l("label",{class:"text-gray margin"},[d("\u771F\u5BE6\u59D3\u540D"),l("span",{class:"red star"},"*")],-1)),me=u(()=>l("label",{class:"text-gray margin"},[d("\u751F\u65E5"),l("span",{class:"red star"},"*")],-1)),he={class:"date-picker row flex flex-center"},ce=u(()=>l("label",{class:"text-gray margin"},[d("\u5C45\u4F4F\u57CE\u5E02"),l("span",{class:"red star"},"*")],-1)),fe=u(()=>l("label",{class:"text-gray margin"},"\u95DC\u65BC\u6211",-1)),pe=u(()=>l("label",{class:"text-gray margin"},"\u7D66\u81EA\u5DF1\u4E00\u4E9B\u5A92\u5408\u7528\u7684\u95DC\u9375\u5B57\u5427\uFF01",-1)),ge=u(()=>l("label",{class:"text-gray margin"},[d("\u624B\u6A5F\u865F\u78BC"),l("span",{class:"red star"},"*")],-1)),ye=u(()=>l("label",{class:"text-gray margin"},[d("Email\u4FE1\u7BB1"),l("span",{class:"red star"},"*")],-1)),_e={class:"text-orange mini margin-top"},Fe=u(()=>l("div",{class:"filler"},null,-1)),De={class:"col-6 col-md-4 col-sm-4 col-xs-4 flex flex-col flex-start-center"},ve=["src"],xe={class:"row fluid flex flex-start-center"},Ce=u(()=>l("div",{class:"filler"},null,-1)),be={class:"row"},we=u(()=>l("h4",{class:"text-left text-dark-green fluid"},"\u5B78\u751F\u8CC7\u6599",-1)),Ve={class:"col-6 col-md-6 col-sm-8 col-xs-8 flex flex-col"},Ue={class:"text-dark-gray"},ke=u(()=>l("label",{class:"text-gray margin"},[d("\u751F\u65E5"),l("span",{class:"red star"},"*")],-1)),Ae={class:"date-picker row flex flex-center"},Ee=u(()=>l("div",{class:"small-space"},null,-1)),Be={class:"row flex flex-col flex-start-center"},Pe=u(()=>l("h4",{class:"text-dark-green"},"VARK\u5B78\u7FD2\u98A8\u683C",-1)),Re=u(()=>l("p",null,null,-1)),Le=u(()=>l("div",{class:"small-space"},null,-1)),$e={class:"text-gray margin"},Te={class:"text-gray margin"},Ie={class:"text-gray margin"},Se={class:"text-gray margin"},Qe=u(()=>l("div",{class:"row flex flex-col flex-start-center"},[l("h4",{class:"text-dark-green"},"\u591A\u5143\u667A\u80FD"),l("p")],-1)),Me={class:"text-gray margin"},Ne={class:"text-gray margin"},ze={class:"text-gray margin"},Ge={class:"text-gray margin"},We={class:"text-gray margin"},je={class:"text-gray margin"},Oe={class:"text-gray margin"},Je={class:"text-gray margin"},Ke=u(()=>l("div",{class:"small-space"},null,-1)),qe={class:"text-gray margin"},He={class:"row fluid"},Xe=u(()=>l("label",{class:"text-gray flex flex-center"},"\u9996\u9078\u6642\u9593",-1)),Ye={class:"row fluid"},Ze=u(()=>l("label",{class:"text-gray flex flex-center"},"\u5C31\u8B80\u5B78\u6821",-1)),et=u(()=>l("div",{class:"filler"},null,-1)),tt={class:"col-6 col-md-6 col-sm-4 col-xs-4 flex flex-col flex-start-center"},st={class:"row"},lt={key:0,class:"row"},at=u(()=>l("h4",{class:"text-left text-dark-green fluid"},"\u8B8A\u66F4\u5BC6\u78BC",-1));function ot(e,t,o,c,p,y){return x(),R(K,null,{default:n(()=>[l("div",te,[l("h2",se,[a(P,{name:"menu_book"}),d("\u6703\u54E1\u8CC7\u6599")])]),e.uid?(x(),U("div",ie,[a(J,{class:"profile-card"},{default:n(()=>[ne,l("div",ue,[l("div",re,[a(r,{class:"flex flex-start-center fluid row"},{default:n(()=>[de,a(D,{class:"margin",modelValue:e.myName,"onUpdate:modelValue":t[0]||(t[0]=s=>e.myName=s),placeholder:"\u59D3\u540D*",style:{"max-width":"300px"},onFocus:t[1]||(t[1]=s=>{e.focusDate=[],e.focusMyDate=!1})},null,8,["modelValue"])]),_:1}),a(r,{class:"flex flex-start-center fluid row"},{default:n(()=>[me,a(D,{class:"margin",modelValue:e.myDate,"onUpdate:modelValue":t[2]||(t[2]=s=>e.myDate=s),placeholder:"\u751F\u65E5",style:{"max-width":"300px"},onFocus:t[3]||(t[3]=s=>e.focusMyDate=!0),onClick:t[4]||(t[4]=s=>e.focusMyDate=!0)},null,8,["modelValue"]),E(l("div",he,[a(I,{modelValue:e.myDate,"onUpdate:modelValue":t[5]||(t[5]=s=>e.myDate=s)},null,8,["modelValue"]),a(_,{class:"confirm-date",color:"secondary",onClick:t[6]||(t[6]=s=>{e.focusDate=[],e.focusMyDate=!1})},{default:n(()=>[d("\u78BA\u8A8D")]),_:1})],512),[[B,e.focusMyDate]])]),_:1}),a(r,{class:"flex flex-start-center fluid"},{default:n(()=>[ce,a(D,{class:"margin",type:"text",modelValue:e.myCity,"onUpdate:modelValue":t[7]||(t[7]=s=>e.myCity=s),placeholder:"\u5C45\u4F4F\u57CE\u5E02",style:{"max-width":"300px"},onFocus:t[8]||(t[8]=s=>{e.focusDate=[],e.focusMyDate=!1})},null,8,["modelValue"])]),_:1}),a(r,{class:"flex flex-start-center fluid"},{default:n(()=>[fe,a(D,{class:"margin",filled:"",type:"textarea",modelValue:e.myIntro,"onUpdate:modelValue":t[9]||(t[9]=s=>e.myIntro=s),placeholder:"\u4ECB\u7D39\u4E00\u4E0B\u81EA\u5DF1\u5427\uFF01\u8208\u8DA3\u3001\u5DE5\u4F5C\u7B49\u7B49\uFF0C\u8D8A\u8A73\u7D30\u5C0D\u5A92\u5408\u6108\u6709\u5E6B\u52A9\u5594",style:{"max-width":"300px"},onFocus:t[10]||(t[10]=s=>{e.focusDate=[],e.focusMyDate=!1})},null,8,["modelValue"])]),_:1}),a(r,{class:"flex flex-start-center fluid"},{default:n(()=>[pe,a(D,{class:"margin",filled:"",type:"textarea",modelValue:e.myTags,"onUpdate:modelValue":t[11]||(t[11]=s=>e.myTags=s),placeholder:"\u8ACB\u7528\u9017\u865F\u5206\u9694\uFF0C\u5982\uFF1A\u7F8E\u98DF,\u5C0F\u8AAA,\u570D\u68CB",style:{"max-width":"300px"},onFocus:t[12]||(t[12]=s=>{e.focusDate=[],e.focusMyDate=!1})},null,8,["modelValue"])]),_:1}),a(r,{class:"flex flex-start-center fluid"},{default:n(()=>[ge,a(D,{class:"margin",type:"text",modelValue:e.myPhone,"onUpdate:modelValue":t[13]||(t[13]=s=>e.myPhone=s),placeholder:"\u624B\u6A5F\u865F\u78BC*",style:{"max-width":"300px"},onFocus:t[14]||(t[14]=s=>{e.focusDate=[],e.focusMyDate=!1})},null,8,["modelValue"])]),_:1}),a(r,{class:"flex flex-start-center fluid"},{default:n(()=>[ye,e.myEmail?(x(),R(D,{key:0,class:"margin readonly-input","bg-color":"teal-2",standout:"bg-teal-4 text-black",square:"",type:"email",modelValue:e.myEmail,"onUpdate:modelValue":t[15]||(t[15]=s=>e.myEmail=s),placeholder:"Email*",readonly:!0,style:{"max-width":"300px"},onFocus:t[16]||(t[16]=s=>{e.focusDate=[],e.focusMyDate=!1})},null,8,["modelValue"])):L("",!0)]),_:1}),E(l("p",_e,"**\u8ACB\u5148\u586B\u5BEB\u5B8C\u518D\u7E7C\u7E8C",512),[[B,!e.myEmail]])]),Fe,l("div",De,[l("img",{class:"big avatar",src:e.myPhotoURL},null,8,ve),a(_,{class:"no-border no-bg text-dark-green",unelevated:"",onClick:t[17]||(t[17]=s=>e.editP=!0)},{default:n(()=>[d("\u7DE8\u8F2F")]),_:1}),E(a(r,{class:"flex flex-start-center fluid"},{default:n(()=>[a(S,{color:"teal",filled:"",label:"\u4E0A\u50B3\u5927\u982D\u8CBC",accept:"image/*",onInput:t[18]||(t[18]=s=>e.uploadImage(s)),name:"photoURL"},{prepend:n(()=>[a(P,{name:"cloud_upload"})]),_:1})]),_:1},512),[[B,e.editP]])])]),l("div",xe,[Ce,a(_,{class:"margin or-back text-white",unelevated:"",rounded:"",onClick:t[19]||(t[19]=s=>e.submit()),size:"lg"},{default:n(()=>[d("\u66F4\u65B0\u8CC7\u6599")]),_:1})]),l("div",be,[a(r,{class:"flex flex-start-center fluid"},{default:n(()=>[we,a(_,{unelevated:"",color:"primary",rounded:"",size:"lg",icon:"person_add",onClick:t[20]||(t[20]=s=>e.childern.push({likeDay:!1,likeNight:!1,likeWeekend:!1,publicSchool:!1,priviteSchool:!1,homeSchool:!1,style_v:10,style_a:10,style_r:10,style_k:10,int_linguistic:80,int_logical:80,int_spatial:80,int_musical:80,int_kinesthetic:80,int_interpersonal:80,int_intrapersonal:80,int_naturalist:e.int_naturalist,standard:80}))},{default:n(()=>[d("\u65B0\u589E\u5B50\u5973")]),_:1})]),_:1}),(x(!0),U(q,null,H(e.childern,(s,h)=>(x(),U("div",{class:"row padded",key:h},[l("div",Ve,[a(r,{class:"flex flex-start-center fluid row"},{default:n(()=>[l("h4",Ue,g(h+1)+".",1),a(D,{class:"margin",modelValue:s.name,"onUpdate:modelValue":i=>s.name=i,placeholder:"\u59D3\u540D*",style:{"max-width":"300px"},onFocus:i=>{e.focusDate[h]=!1,e.focusMyDate=!1}},null,8,["modelValue","onUpdate:modelValue","onFocus"]),a(j,{modelValue:s.gender,"onUpdate:modelValue":i=>s.gender=i,options:["\u5973","\u7537","\u96D9\u6027","\u5176\u4ED6"],label:"\u6027\u5225",style:{"max-width":"300px","min-width":"200px"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(r,{class:"flex flex-start-center fluid row"},{default:n(()=>[ke,a(D,{class:"margin",modelValue:s.date,"onUpdate:modelValue":i=>s.date=i,placeholder:"\u751F\u65E5*",style:{"max-width":"300px"},onFocus:i=>{e.focusDate[h]=!0,e.focusMyDate=!1}},null,8,["modelValue","onUpdate:modelValue","onFocus"]),E(l("div",Ae,[a(I,{modelValue:s.date,"onUpdate:modelValue":i=>s.date=i},null,8,["modelValue","onUpdate:modelValue"]),a(_,{class:"confirm-date",color:"secondary",onClick:t[21]||(t[21]=i=>e.confirmS())},{default:n(()=>[d("\u78BA\u8A8D")]),_:1})],512),[[B,e.focusDate[h]]])]),_:2},1024),Ee,l("div",Be,[a(_,{onClick:t[22]||(t[22]=i=>e.goAssessment()),color:"green margin",size:"lg",rounded:"",icon:"assessment"},{default:n(()=>[d("\u5B78\u7FD2\u98A8\u683C\u6AA2\u6E2C")]),_:1}),Pe,Re]),Le,a(r,{class:"flex flex-start-center fluid row"},{default:n(()=>[l("label",$e,"\u8996\u89BA/\u5716\u8C61\uFF1A"+g(s.style_v),1),l("label",Te,"\u807D\u89BA/\u8A9E\u97F3\uFF1A"+g(s.style_a),1),l("label",Ie,"\u95B1\u8B80/\u66F8\u5BEB\uFF1A"+g(s.style_r),1),l("label",Se,"\u5BE6\u4F5C/\u9AD4\u9A57\uFF1A"+g(s.style_k),1)]),_:2},1024),Qe,a(r,{class:"flex flex-start-center fluid row"},{default:n(()=>[l("label",Me,"\u8A9E\u8A00\u667A\u80FD\uFF1A"+g(s.int_linguistic),1),l("label",Ne,"\u6578\u7406\u908F\u8F2F\u667A\u80FD\uFF1A"+g(s.int_logical),1),l("label",ze,"\u7A7A\u9593\u667A\u80FD\uFF1A"+g(s.int_spatial),1),l("label",Ge,"\u97F3\u6A02\u667A\u80FD\uFF1A"+g(s.int_musical),1),l("label",We,"\u80A2\u9AD4\u52D5\u89BA\u667A\u80FD\uFF1A"+g(s.int_kinesthetic),1),l("label",je,"\u4EBA\u969B\u667A\u80FD\uFF1A"+g(s.int_interpersonal),1),l("label",Oe,"\u5167\u7701\u667A\u80FD\uFF1A"+g(s.int_intrapersonal),1),l("label",Je,"\u81EA\u7136\u667A\u80FD\uFF1A"+g(s.int_naturalist),1)]),_:2},1024),Ke,a(r,{class:"flex flex-start-center fluid row"},{default:n(()=>[l("label",qe,"\u7E3D\u5408\u5B78\u7FD2\u80FD\u529B\uFF1A"+g(s.standard),1)]),_:2},1024),a(r,{class:"flex flex-start-center fluid row"},{default:n(()=>[l("div",He,[Xe,a(w,{"toggle-order":"ft",modelValue:s.likeDay,"onUpdate:modelValue":i=>s.likeDay=i,label:"\u4E0A\u5B78\u6642\u9593"},null,8,["modelValue","onUpdate:modelValue"]),a(w,{"toggle-order":"ft",modelValue:s.likeNight,"onUpdate:modelValue":i=>s.likeNight=i,label:"\u653E\u5B78\u5F8C\u548C\u665A\u4E0A"},null,8,["modelValue","onUpdate:modelValue"]),a(w,{"toggle-order":"ft",modelValue:s.likeWeekend,"onUpdate:modelValue":i=>s.likeWeekend=i,label:"\u9031\u672B"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",Ye,[Ze,a(w,{"toggle-indeterminate":"","toggle-order":"ft",modelValue:s.publicSchool,"onUpdate:modelValue":i=>s.publicSchool=i,label:"\u516C\u7ACB\u5B78\u6821"},null,8,["modelValue","onUpdate:modelValue"]),a(w,{"toggle-indeterminate":"","toggle-order":"ft",modelValue:s.priviteSchool,"onUpdate:modelValue":i=>s.priviteSchool=i,label:"\u79C1\u7ACB\u5B78\u6821"},null,8,["modelValue","onUpdate:modelValue"]),a(w,{"toggle-indeterminate":"","toggle-order":"ft",modelValue:s.homeSchool,"onUpdate:modelValue":i=>s.homeSchool=i,label:"\u5728\u5BB6\u81EA\u5B78"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024)]),et,l("div",tt,[a(O,{class:"big avatar",src:s.photoURL||""},null,8,["src"]),a(_,{class:"no-border no-bg text-dark-green",unelevated:"",onClick:t[23]||(t[23]=i=>e.editP=!0)},{default:n(()=>[d("\u7DE8\u8F2F")]),_:1}),e.editP?(x(),R(r,{key:0,class:"flex flex-start-center fluid"},{default:n(()=>[a(S,{color:"teal",filled:"",label:"\u4E0A\u50B3\u5927\u982D\u8CBC",accept:"image/*",onInput:i=>e.uploadImage1(i,h),name:s.name+"_photoURL"},{prepend:n(()=>[a(P,{name:"cloud_upload"})]),_:2},1032,["onInput","name"])]),_:2},1024)):L("",!0)])]))),128))]),l("div",st,[a(r,null,{default:n(()=>[a(_,{class:"margin or-border text-orange",unelevated:"",rounded:"",onClick:t[24]||(t[24]=s=>e.cancel()),size:"lg"},{default:n(()=>[d("\u53D6\u6D88")]),_:1}),a(_,{class:"margin or-back text-white",unelevated:"",rounded:"",onClick:t[25]||(t[25]=s=>e.submit()),size:"lg"},{default:n(()=>[d("\u66F4\u65B0\u8CC7\u6599")]),_:1}),a(_,{onClick:t[26]||(t[26]=s=>e.goAssessment()),color:"green margin",size:"lg",rounded:"",icon:"assessment"},{default:n(()=>[d("\u5B78\u7FD2\u98A8\u683C\u6AA2\u6E2C")]),_:1})]),_:1})]),e.me.provider=="email"?(x(),U("div",lt,[a(r,{class:"flex flex-start-center fluid"},{default:n(()=>[at]),_:1}),a(r,{class:"flex flex-start-center fluid"},{default:n(()=>[a(_,{color:"secondary",onClick:t[27]||(t[27]=s=>e.forgetPassWord())},{default:n(()=>[d("\u8B8A\u66F4\u5BC6\u78BC")]),_:1})]),_:1})])):L("",!0)]),_:1})])):(x(),U("div",le,oe))]),_:1})}const b=W(),it=ee({name:"ClassesPage",props:["uid","me","users","user","email","photoURL","logged_in","isLogout","isInApp","myKey","items","isTeacher","isAdmin"],setup(){G({title:"\u5E33\u865F",noscript:{default:"This is content for browsers with no JS (or disabled JS)"}});const t=[],o=f({totalCount:1200}),c=f(!1),p=f([]),y=f(""),s=f(""),h=f(""),i=f(""),F=f("\u4FE1\u7528\u5361"),v=f([]),k=f(!1),A=f(""),Q=f(""),M=f(""),N=f(""),z=f(t);return{meta:o,myDate:y,focusMyDate:k,editP:c,editCP:p,myCity:s,myIntro:h,myTags:i,myPayMethod:F,myName:A,myEmail:Q,myPhone:M,childern:z,focusDate:v,myPhotoURL:N}},mounted(){this.me&&this.me.name?(this.myName=this.me.name,this.myEmail=this.email,this.myPhone=this.me.phone,this.myDate=this.me.date,this.myCity=this.me.city,this.myIntro=this.me.intro,this.myTags=m.myTags,this.childern=this.me.childern||[],this.myPhotoURL=this.me.photoURL||this.photoURL,this.myPayMethod=this.me.payMethod||"\u4FE1\u7528\u5361"):this.email&&(this.myEmail=this.email),this.uid&&T(C(b,"users/"+this.uid)).then(e=>{if(e.exists()){console.log("get me");const t=e.val();this.myName=t.name,this.myEmail=this.email,this.myPhone=t.phone,this.myDate=t.date,this.myCity=t.city,this.myIntro=t.intro,this.myTags=t.myTags,this.childern=t.childern||[],this.myPhotoURL=t.photoURL||this.photoURL,this.myPayMethod=t.payMethod||"\u4FE1\u7528\u5361",this.$emit("get_current_user",t)}else console.log("No data available")}).catch(e=>{console.error(e)})},watch:{logged_in(e){console.log(e),this.uid&&T(C(b,"users/"+this.uid)).then(t=>{if(t.exists()){console.log("get user data");const o=t.val();this.myName=o.name,this.myEmail=o.email||this.email,this.myPhone=o.phone,this.myDate=o.date,this.myCity=o.city,this.myIntro=o.intro,this.m.intro=o.myTags,this.childern=o.childern||[],this.myPhotoURL=o.photoURL||this.photoURL,this.myPayMethod=o.payMethod||"\u4FE1\u7528\u5361",setTimeout(()=>{this.$emit("get_current_user",o)},100)}else console.log("No data available")}).catch(t=>{console.error(t)})},childern(e,t){for(let o=0;o<e.length;o++)(!t[o]||!t[o].date||e[o].date!==t[o].date)&&(this.focusDate=[])},me(e){e&&e.name&&(this.myName=e.name,this.myCity=e.city||"",this.myIntro=e.intro||"",this.myTags=e.tags||"",this.myDate=e.date,this.myEmail=e.email||this.email,this.myPhone=e.phone||"",this.childern=e.childern||[],this.myPhotoURL=e.photoURL||this.photoURL,this.myPayMethod=e.payMethod||"\u4FE1\u7528\u5361")}},methods:{goAssessment(){setTimeout(()=>{this.$router.push("/assesment")},100)},confirmS(){const e=this.childern.map(function(o){return o.name});function t(o){for(var c=Object.create(null),p=0;p<o.length;++p){var y=o[p];if(y in c)return!0;c[y]=!0}return!1}if(t(e)){window.alert("\u5B78\u751F\u59D3\u540D\u4E0D\u53EF\u91CD\u8986");return}else{this.focusDate=[],this.focusMyDate=!1;return}},forgetPassWord(){this.$emit("forgetPassWord",this.myEmail)},uploadImage(e){const t=this.uid;var o=document.createElement("img");const c=e.target.files[0];var p=URL.createObjectURL(c);o.src=p,o.name="photoURL",o.onload=function(){var y=o.width,s=o.height;console.log("IMAGE width",y),console.log("IMAGE height: ",s);var h="";y/s>1.4&&(h="\u5BEC\u9AD8\u6BD4\u904E\u5927\uFF0C\u4E0A\u50B3\u6642\u5C07\u6703\u91CD\u8A2D\u70BA\uFF0C120 x 120\uFF0C\u9019\u5C07\u56B4\u91CD\u626D\u66F2\u5716\u7247\uFF0C\u78BA\u5B9A\u8981\u4E0A\u50B3\u55CE\uFF1F"),y/s<.7&&(h="\u5BEC\u9AD8\u6BD4\u904E\u5C0F\uFF0C\u4E0A\u50B3\u6642\u5C07\u6703\u91CD\u8A2D\u70BA\uFF0C120 x 120\uFF0C\u9019\u5C07\u56B4\u91CD\u626D\u66F2\u5716\u7247\uFF0C\u78BA\u5B9A\u8981\u4E0A\u50B3\u55CE\uFF1F"),(!h||window.confirm(h))&&$({file:c,width:120,height:120,type:"png"}).then(i=>{const F=new FileReader;F.readAsDataURL(i),F.onload=v=>{V(C(b,"users/"+t+"/photoURL"),v.target.result),V(C(b,"users_public/"+t+"/photoURL"),v.target.result)}}).catch(i=>{console.log(i)})}},uploadImage1(e,t){const o=this.uid,c=this.updateC;var p=document.createElement("img");const y=e.target.files[0];var s=URL.createObjectURL(y);p.src=s,p.name="photoURL",p.onload=function(){var h=p.width,i=p.height;console.log("IMAGE width",h),console.log("IMAGE height: ",i);var F="";h/i>1.4&&(F="\u5BEC\u9AD8\u6BD4\u904E\u5927\uFF0C\u4E0A\u50B3\u6642\u5C07\u6703\u91CD\u8A2D\u70BA\uFF0C120 x 120\uFF0C\u9019\u5C07\u56B4\u91CD\u626D\u66F2\u5716\u7247\uFF0C\u78BA\u5B9A\u8981\u4E0A\u50B3\u55CE\uFF1F"),h/i<.7&&(F="\u5BEC\u9AD8\u6BD4\u904E\u5C0F\uFF0C\u4E0A\u50B3\u6642\u5C07\u6703\u91CD\u8A2D\u70BA\uFF0C120 x 120\uFF0C\u9019\u5C07\u56B4\u91CD\u626D\u66F2\u5716\u7247\uFF0C\u78BA\u5B9A\u8981\u4E0A\u50B3\u55CE\uFF1F"),(!F||window.confirm(F))&&$({file:y,width:120,height:120,type:"png"}).then(v=>{const k=new FileReader;k.readAsDataURL(v),k.onload=A=>{V(C(b,"users/"+o+"/childern/"+t+"/photoURL"),A.target.result),c(t,A.target.result)}}).catch(v=>{console.log(v)})}},updateC(e,t){this.childern[e].photoURL=t,this.$forceUpdate()},cancel(){window.confirm("\u78BA\u5B9A\u8981\u53D6\u6D88\u55CE\uFF1F\u60A8\u7684\u8B8A\u66F4\u5C07\u4E0D\u6703\u5132\u5B58")&&this.$router.push("/")},submit(e){if(!this.myName){window.alert("\u8ACB\u5148\u8F38\u5165\u60A8\u7684\u59D3\u540D");return}if(!this.myEmail){window.alert("\u8ACB\u5148\u8F38\u5165\u60A8\u7684Email");return}if(!this.myPhone){window.alert("\u8ACB\u5148\u8F38\u5165\u60A8\u7684\u624B\u6A5F\u865F\u78BC");return}let t=new RegExp("^[0-9-\\+()]+$");console.log(this.myPhone),console.log(t.test(this.myPhone));let o=t.test(this.myPhone);if(console.log(o),!o){window.alert("\u624B\u6A5F\u865F\u78BC\u683C\u5F0F\u932F\u8AA4");return}for(let c=0;c<this.childern.length;c++){if(!this.childern[c].name){window.alert("\u8ACB\u5148\u8F38\u5165\u5B50\u5973\u59D3\u540D");return}if(!this.childern[c].date){window.alert("\u8ACB\u5148\u8F38\u5165\u5B50\u5973\u751F\u65E5");return}}V(C(b,"users/"+this.uid),{id:this.uid,bank_code:this.me.bank_code||"",bank_account:this.me.bank_account||"",bank_name:this.me.bank_code||"",account_name:this.me.bank_account||"",provider:this.me.provider||"",photoURL:this.myPhotoURL||this.photoURL,date:this.myDate||"",name:this.myName||"",email:this.myEmail||"",email_for_migration:this.myEmail.replace(/\./g,"_"),phone:this.myPhone||"",city:this.myCity||"",intro:this.myIntro||"",tags:this.myTags||"",childern:this.childern||[],des:this.me.des||"",thought:this.me.thought||"",certifications:this.me.certifications||[],isParent:!0,payMethod:this.myPayMethod||"\u4FE1\u7528\u5361",isTeacher:this.isTeacher||!1,isAdmin:this.isAdmin||!1,notifications:this.me.notifications||[],createTime:this.me.createTime||new Date().getTime(),updateTime:new Date().getTime()}).then(()=>{console.log("user data updated!"),e||window.alert("\u8CC7\u6599\u5DF2\u9001\u51FA\uFF0C\u8B1D\u8B1D")}),V(C(b,"users_public/"+this.uid),{id:this.uid,name:this.myName||"",photoURL:this.myPhotoURL||this.photoURL,isParent:!0,isTeacher:this.isTeacher||!1,isAdmin:this.isAdmin||!1,des:this.me.des||"",thought:this.me.thought||"",certifications:this.me.certifications||[],createTime:this.me.createTime||new Date().getTime(),updateTime:new Date().getTime()}).then(()=>{console.log("public user data updated!")})}}});var $t=Z(it,[["render",ot],["__scopeId","data-v-178eed76"]]);export{$t as default};
